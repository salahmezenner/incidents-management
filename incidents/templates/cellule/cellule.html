{% extends 'incidents/base.html' %}

{% block cellule_css %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/cellule.css' %}" >
{% endblock %}

{% block cellule_js %}
{% load static %}
<script src="{% static 'js/cellule.js' %}"></script>
{% endblock %}

{% block content %}

<script type="text/javascript" id="events-json">
  {{ events|safe }}
</script>

<h2> Agenda de cellules de crises : </h2>
<div class="content">
<div class="container">
    <div class="left">
      <div class="calendar">
        <div class="month">
          <i class="fas fa-angle-left prev"></i>
          <div class="date">december 2015</div>
          <i class="fas fa-angle-right next"></i>
        </div>
        <div class="weekdays">   
          <div>Dimanche</div>
          <div>Lundi</div>
          <div>Mardi</div>
          <div>Mercredi</div>
          <div>Jeudi</div>
          <div>Vendredi</div>
          <div>Samedi </div>
        </div>
        <div class="days"></div>
        <div class="goto-today">
          <div class="goto">
            <input type="text" placeholder="mm/aaaa" class="date-input" />
            <button class="goto-btn"> Valider  </button>
          </div>
          <button class="today-btn">Aujourd'hui</button>
        </div>
      </div>
    </div>
    <div class="right">
      <div class="today-date">
        <div class="event-day">wed</div>
        <div class="event-date">12th december 2022</div>
      </div>
      <div class="events"></div>
        <div class="add-event-wrapper">
          <div class="add-event-header">
            <div class="title">Enregistrer une cellule de crise </div>
            <i class="fas fa-times close"></i>
          </div>
          <div class="add-event-body">
            <div class="add-event-input">
              <input type="text" placeholder="Nom de la cellule de crise  " class="event-name" />
            </div>
            <div class="add-event-input">
              <input
                type="text"
                placeholder="Heure de dÃ©but "
                class="event-time-from"
              />
            </div>
            <div class="add-event-input">
              <input
                type="text"
                placeholder="Heure de fin"
                class="event-time-to"
              />
            </div>
          </div>
          <div class="add-event-footer">
            <button class="add-event-btn"> Enregistrer </button>
          </div>
        </div>
      </div>
      {% if profile.role == 'adminapp' %}
      <button class="add-event">
        <i class="fas fa-plus"></i>
      </button>
      {% endif %}
    </div>
    <div class="button2">
      <a href="{% url 'envoi_mail' %}"> envoi un mail</a>
    </div>
  </div>
    <script>
      function getCookie(name) {
          let cookieValue = null;
          if (document.cookie && document.cookie !== '') {
              const cookies = document.cookie.split(';');
              for (let i = 0; i < cookies.length; i++) {
                  const cookie = cookies[i].trim();
                  if (cookie.substring(0, name.length + 1) === (name + '=')) {
                      cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                      break;
                  }
              }
          }
          return cookieValue;
      }
      const csrftoken = getCookie('csrftoken');
  </script>
{% endblock %}